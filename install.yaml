name: redis

project_files:
  - docker-compose.redis.yaml
  - redis/scripts/settings.ddev.redis.php
  - redis/scripts/setup-drupal-settings.sh
  - redis/redis.conf
  - commands/redis/redis-cli
  - commands/redis/redis-flush

ddev_version_constraint: '>= v1.24.3'

post_install_actions:
  - |
    #ddev-description:Install redis settings for Drupal 9+ if applicable
    redis/scripts/setup-drupal-settings.sh

removal_actions:
  - |
    #ddev-description:Remove redis settings for Drupal 9+ if applicable
    rm -f "${DDEV_APPROOT}/${DDEV_DOCROOT}/sites/default/settings.ddev.redis.php"
